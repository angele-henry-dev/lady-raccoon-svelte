import{l as He,m as Ve,t as C,a as h,n as R,k as he}from"../chunks/CneMuT22.js";import{a as ae,s as re,i as qe,b as ge,r as F,c as Ae}from"../chunks/CtKJIoAO.js";import{b as De,Y as Ge,i as Ke,as as Xe,q as Ye,h as $e,j as Ze,at as Je,a2 as Qe,am as Ue,t as T,c as n,r as o,p as We,f as et,g as i,a as tt,s as c,G as ye,n as J,_ as Q,Z as _,au as Me}from"../chunks/DNaZH1DC.js";import{s as m}from"../chunks/BUxUjzc_.js";import{e as U,i as W}from"../chunks/Bu7uc-6v.js";import{o as at}from"../chunks/d2rYJ7uk.js";import{p as I}from"../chunks/3JIQj3lP.js";import{H as rt}from"../chunks/CrQ2xTS_.js";import{P as ke}from"../chunks/S8eMQSF0.js";function lt(e,r,...t){var a=e,l=Xe,v;De(()=>{l!==(l=r())&&(v&&(Ye(v),v=null),v=Ke(()=>l(a,...t)))},Ge),$e&&(a=Ze)}function O(e,r,t=r){var a=Je();He(e,"input",l=>{var v=l?e.defaultValue:e.value;if(v=ee(e)?te(v):v,t(v),a&&v!==(v=r())){var d=e.selectionStart,u=e.selectionEnd;e.value=v??"",u!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(u,e.value.length))}}),($e&&e.defaultValue!==e.value||Qe(r)==null&&e.value)&&t(ee(e)?te(e.value):e.value),Ue(()=>{var l=r();ee(e)&&l===te(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function ee(e){var r=e.type;return r==="number"||r==="range"}function te(e){return e===""?null:+e}const le=7,it=4.5,st=4.5,ot=3;function S(e){return/^#[0-9A-Fa-f]{6}$/.test(e)}function N(e){let r=0,t=0,a=0;return e.length===7&&(r=parseInt(e.slice(1,3),16),t=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16)),{r,g:t,b:a}}function je(e,r,t){const a=l=>l.toString(16).padStart(2,"0");return`#${a(e)}${a(r)}${a(t)}`}function we(e,r,t){const a=[e,r,t].map(l=>(l/=255,l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4)));return a[0]*.2126+a[1]*.7152+a[2]*.0722}function g(e,r){if(!S(e)||!S(r))return 0;const t=N(e),a=N(r),l=we(t.r,t.g,t.b),v=we(a.r,a.g,a.b);return(Math.max(l,v)+.05)/(Math.min(l,v)+.05)}function nt(e,r){let t=e,a=0;for(;g(t,r)<le&&a<50;)t=Re(r,t),a++;return t}function Re(e,r){if(!S(e)||!S(r))return r;const t=N(r);let a=g(e,r),l=0;const v=g(e,"#000000")>g(e,"#ffffff");for(;a<le&&l<50;)v?(t.r=Math.max(0,t.r-5),t.g=Math.max(0,t.g-5),t.b=Math.max(0,t.b-5)):(t.r=Math.min(255,t.r+5),t.g=Math.min(255,t.g+5),t.b=Math.min(255,t.b+5)),r=je(t.r,t.g,t.b),a=g(e,r),l++;return r}function Te(e,r){const{r:t,g:a,b:l}=N(e),d={protanopia:[[.567,.433,0],[.558,.442,0],[0,.242,.758]],deuteranopia:[[.625,.375,0],[.7,.3,0],[0,.3,.7]],tritanopia:[[.95,.05,0],[0,.433,.567],[0,.475,.525]],achromatopsia:[[.299,.587,.114],[.299,.587,.114],[.299,.587,.114]]}[r],u=Math.max(0,Math.min(255,Math.round(t*d[0][0]+a*d[0][1]+l*d[0][2]))),A=Math.max(0,Math.min(255,Math.round(t*d[1][0]+a*d[1][1]+l*d[1][2]))),b=Math.max(0,Math.min(255,Math.round(t*d[2][0]+a*d[2][1]+l*d[2][2])));return je(u,A,b)}const ct=[{title:"protanopie",technical:"protanopia",example_1:"It's dangerous to go alone! Take this contrast boost!",example_2:"Ce texte est super efficace !"},{title:"deutéranopie",technical:"deuteranopia",example_1:"May the contrast be with you...",example_2:"Le futur est accessible. Enfin… presque."},{title:"tritanopie",technical:"tritanopia",example_1:"Neo, vois-tu enfin les contrastes de la Matrice ?",example_2:"Error 404: Low contrast not found."},{title:"achromatopsie",technical:"achromatopsia",example_1:"Debugging contrast levels like a pro.",example_2:"Accès autorisé : contraste optimal détecté."}];var vt=C("<button><!></button>");function Ce(e,r){let t=I(r,"children",8),a=I(r,"label",8),l=I(r,"color",8,"primary"),v=I(r,"handleClick",8);var d=vt();d.__click=function(...A){var b;(b=v())==null||b.apply(this,A)};var u=n(d);lt(u,t),o(d),T(()=>{ae(d,1,`inline-block mt-6 px-6 py-3 
        font-semibold 
        text-[var(--background)] hover:text-[var(--background)] 
        ${(l()==="primary"?"bg-[var(--primary)]":"bg-[var(--secondary)]")??""} 
        ${(l()==="primary"?"hover:bg-[var(--secondary)]":"hover:bg-[var(--primary)]")??""} 
        transition z-20`),re(d,"aria-label",a())}),h(e,d)}Ve(["click"]);var dt=C("<div><p> </p> <p> </p></div>"),pt=C("<div><p> </p> <p> </p></div>"),ut=C('<div class="pickers flex flex-col gap-5 flex-wrap mb-10"><div class="contrast flex flex-col p-5 pt-0"><p class="my-3 font-black"> </p> <p class="text-center"> </p> <div class="accessibility-levels svelte-xbvd9j"></div></div> <div class="preview flex flex-col p-5 pt-0"><div><p class="my-3 font-black">Normal text - 12pt</p> <p style="font-size: 12pt;"> </p></div> <div><p class="my-3 font-black">Large text - 18pt</p> <p style="font-size: 18pt;"> </p></div></div></div>'),ft=C(`<!> <!> <div class="relative w-full max-w-5xl mx-auto px-4 mb-10"><article class="w-full px-10 pb-10 bg-[var(--background)] border"><h1 class="mb-0">Tester le contraste des couleurs</h1> <div class="pickers flex flex-col gap-5 flex-wrap my-10"><div class="flex flex-row gap-5 flex-wrap"><div class="flex flex-row gap-5 flex-wrap p-5 pt-0"><div class="flex flex-col"><label for="hexaBg" class="font-black my-5">Couleur de fond :</label> <div class="input-container svelte-xbvd9j"><input type="text" aria-label="code hexadecimal fond" title="Veuillez entrer un code hexadécimal valide (ex: #FF5733)" class="svelte-xbvd9j"> <input type="color" id="hexaBg" class="svelte-xbvd9j"></div> <!></div> <div class="flex flex-col"><label for="hexaText" class="font-black my-5">Couleur du texte :</label> <div class="input-container svelte-xbvd9j"><input type="text" aria-label="code hexadecimal texte" title="Veuillez entrer un code hexadécimal valide (ex: #FF5733)" class="svelte-xbvd9j"> <input type="color" id="hexaText" class="svelte-xbvd9j"></div> <!></div></div> <div class="contrast flex flex-col p-5 pt-0"><p class="my-3 font-black">Contraste</p> <p class="text-center"> </p> <div class="accessibility-levels svelte-xbvd9j"></div></div></div> <div class="preview flex flex-col p-5 pt-0"><div><p class="my-3 font-black">Normal text - 12pt</p> <p style="font-size: 12pt;">I see dead pixels… but not with this contrast!</p></div> <div><p class="my-3 font-black">Large text - 18pt</p> <p style="font-size: 18pt;">Mission: Increase contrast. Status: In Progress...</p></div></div></div> <!> <!></article></div> <svg height="0" width="0"><defs><filter id="protanopia"><feColorMatrix type="matrix" values="0.567, 0.433, 0, 0, 0
													0.558, 0.442, 0, 0, 0
													0, 0.242, 0.758, 0, 0
													0, 0, 0, 1, 0"></feColorMatrix></filter><filter id="deuteranopia"><feColorMatrix type="matrix" values="0.625, 0.375, 0, 0, 0
													0.7, 0.3, 0, 0, 0
													0, 0.3, 0.7, 0, 0
													0, 0, 0, 1, 0"></feColorMatrix></filter><filter id="tritanopia"><feColorMatrix type="matrix" values="0.95, 0.05, 0, 0, 0
													0, 0.433, 0.567, 0, 0
													0, 0.475, 0.525, 0, 0
													0, 0, 0, 1, 0"></feColorMatrix></filter><filter id="achromatopsia"><feColorMatrix type="matrix" values="0.299, 0.587, 0.114, 0, 0
													0.299, 0.587, 0.114, 0, 0
													0.299, 0.587, 0.114, 0, 0
													0, 0, 0, 1, 0"></feColorMatrix></filter></defs></svg>`,1);function kt(e,r){We(r,!1);let t=Q("#f8f8f8"),a=Q("#111110"),l=Q({contrast:0,protanopia:0,deuteranopia:0,tritanopia:0,achromatopsia:0});function v(){_(a,Re(i(t),i(a))),u()}function d(){_(t,nt(i(t),i(a))),u()}function u(){Me(l,i(l).contrast=g(i(t),i(a))),["protanopia","deuteranopia","tritanopia","achromatopsia"].forEach(s=>{Me(l,i(l)[s]=g(Te(i(t),s),Te(i(a),s)))})}function A(s,p){const x=s.target.value.trim();/^#[0-9A-Fa-f]{6}$/.test(x)&&(p==="bg"?_(t,x):_(a,x),u())}function b(s){return[{label:"AA 18pt",reached:s>=ot},{label:"AA",reached:s>=st},{label:"AAA 18pt",reached:s>=it},{label:"AAA",reached:s>=le}]}at(u),qe();var ie=ft(),se=et(ie);rt(se);var oe=c(se,2);ke(oe,{class:"absolute top-[150px] end-[0] w-[90px] sm:w-[150px]"});var ne=c(oe,2),ce=n(ne),z=c(n(ce),2),B=n(z),E=n(B),L=n(E),P=c(n(L),2),y=n(P);F(y),re(y,"pattern","#[0-9A-Fa-f]6");var H=c(y,2);F(H),o(P);var Fe=c(P,2);Ce(Fe,{handleClick:d,label:"Ajuster le fond",children:(s,p)=>{J();var f=he("Ajuster le fond");h(s,f)},$$slots:{default:!0}}),o(L);var ve=c(L,2),V=c(n(ve),2),M=n(V);F(M),re(M,"pattern","#[0-9A-Fa-f]6");var q=c(M,2);F(q),o(V);var Ie=c(V,2);Ce(Ie,{handleClick:v,label:"Ajuster le texte",children:(s,p)=>{J();var f=he("Ajuster le texte");h(s,f)},$$slots:{default:!0}}),o(ve),o(E);var de=c(E,2),D=c(n(de),2),Oe=n(D);o(D);var pe=c(D,2);U(pe,5,()=>b(i(l).contrast),W,(s,p)=>{var f=dt(),x=n(f),k=n(x,!0);o(x);var $=c(x,2),w=n($);o($),o(f),T(()=>{ae(f,1,Ae(i(p).reached?"badge success":"badge error"),"svelte-xbvd9j"),m(k,i(p).label),m(w,`- ${(i(p).reached?"OK":"X")??""} -`)}),h(s,f)}),o(pe),o(de),o(B);var Se=c(B,2);o(z);var ue=c(z,2);U(ue,1,()=>ct,W,(s,p)=>{var f=ut(),x=n(f),k=n(x),$=n(k);o(k);var w=c(k,2),ze=n(w);o(w);var fe=c(w,2);U(fe,5,()=>b(i(l)[i(p).technical]),W,(X,Y)=>{var j=pt(),Z=n(j),Le=n(Z,!0);o(Z);var be=c(Z,2),Pe=n(be);o(be),o(j),T(()=>{ae(j,1,Ae(i(Y).reached?"badge success":"badge error"),"svelte-xbvd9j"),m(Le,i(Y).label),m(Pe,`- ${(i(Y).reached?"OK":"X")??""} -`)}),h(X,j)}),o(fe),o(x);var G=c(x,2),K=n(G),xe=c(n(K),2),Be=n(xe,!0);o(xe),o(K);var me=c(K,2),_e=c(n(me),2),Ee=n(_e,!0);o(_e),o(me),o(G),o(f),T(X=>{m($,`Contraste ${i(p).title??""}`),m(ze,`Ratio : ${X??""}`),ge(G,`background-color: ${i(t)??""}; color: ${i(a)??""}; filter: url(#${[i(p).technical]});`),m(Be,i(p).example_1),m(Ee,i(p).example_2)},[()=>i(l)[i(p).technical].toFixed(2)],ye),h(s,f)});var Ne=c(ue,2);ke(Ne,{class:"absolute bottom-0 start-0 md:start-[-15%] w-[90px] sm:w-[150px] z-[-1]"}),o(ce),o(ne),J(2),T(s=>{m(Oe,`Ratio : ${s??""}`),ge(Se,`background-color: ${i(t)??""}; color: ${i(a)??""};`)},[()=>i(l).contrast.toFixed(2)],ye),O(y,()=>i(t),s=>_(t,s)),R("input",y,s=>A(s,"bg")),O(H,()=>i(t),s=>_(t,s)),R("input",H,u),O(M,()=>i(a),s=>_(a,s)),R("input",M,s=>A(s,"text")),O(q,()=>i(a),s=>_(a,s)),R("input",q,u),h(e,ie),tt()}export{kt as component};
