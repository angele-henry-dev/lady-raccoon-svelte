import{l as Ae,m as ke,t as Z,a as w,n as k,k as re}from"../chunks/CneMuT22.js";import{a as D,s as L,i as Ce,c as ie,b as se,r as C}from"../chunks/CtKJIoAO.js";import{b as $e,Y as Te,i as je,as as Fe,q as Be,h as ve,j as Re,at as Pe,a2 as Ee,am as Se,t as Y,c as u,r as d,p as He,f as Ie,g as n,a as ze,s as c,G as le,n as V,_ as N,Z as b,au as ne}from"../chunks/DNaZH1DC.js";import{s as q}from"../chunks/BUxUjzc_.js";import{e as Ve,i as Ne}from"../chunks/Bu7uc-6v.js";import{o as qe}from"../chunks/d2rYJ7uk.js";import{p as $}from"../chunks/3JIQj3lP.js";import{H as Ge}from"../chunks/CrQ2xTS_.js";import{P as oe}from"../chunks/S8eMQSF0.js";function Oe(e,i,...t){var a=e,r=Fe,s;$e(()=>{r!==(r=i())&&(s&&(Be(s),s=null),s=je(()=>r(a,...t)))},Te),ve&&(a=Re)}function T(e,i,t=i){var a=Pe();Ae(e,"input",r=>{var s=r?e.defaultValue:e.value;if(s=G(e)?O(s):s,t(s),a&&s!==(s=i())){var o=e.selectionStart,p=e.selectionEnd;e.value=s??"",p!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(p,e.value.length))}}),(ve&&e.defaultValue!==e.value||Ee(i)==null&&e.value)&&t(G(e)?O(e.value):e.value),Se(()=>{var r=i();G(e)&&r===O(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function G(e){var i=e.type;return i==="number"||i==="range"}function O(e){return e===""?null:+e}const J=7;function j(e){return/^#[0-9A-Fa-f]{6}$/.test(e)}function F(e){let i=0,t=0,a=0;return e.length===7&&(i=parseInt(e.slice(1,3),16),t=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16)),{r:i,g:t,b:a}}function fe(e,i,t){const a=r=>r.toString(16).padStart(2,"0");return`#${a(e)}${a(i)}${a(t)}`}function ce(e,i,t){const a=[e,i,t].map(r=>(r/=255,r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)));return a[0]*.2126+a[1]*.7152+a[2]*.0722}function _(e,i){if(!j(e)||!j(i))return 0;const t=F(e),a=F(i),r=ce(t.r,t.g,t.b),s=ce(a.r,a.g,a.b);return(Math.max(r,s)+.05)/(Math.min(r,s)+.05)}function De(e,i){let t=e,a=0;for(;_(t,i)<J&&a<50;)t=pe(i,t),a++;return t}function pe(e,i){if(!j(e)||!j(i))return i;const t=F(i);let a=_(e,i),r=0;const s=_(e,"#000000")>_(e,"#ffffff");for(;a<J&&r<50;)s?(t.r=Math.max(0,t.r-5),t.g=Math.max(0,t.g-5),t.b=Math.max(0,t.b-5)):(t.r=Math.min(255,t.r+5),t.g=Math.min(255,t.g+5),t.b=Math.min(255,t.b+5)),i=fe(t.r,t.g,t.b),a=_(e,i),r++;return i}function ue(e,i){const{r:t,g:a,b:r}=F(e),o={protanopia:[[.567,.433,0],[.558,.442,0],[0,.242,.758]],deuteranopia:[[.625,.375,0],[.7,.3,0],[0,.3,.7]],tritanopia:[[.95,.05,0],[0,.433,.567],[0,.475,.525]],achromatopsia:[[.299,.587,.114],[.299,.587,.114],[.299,.587,.114]]}[i],p=Math.max(0,Math.min(255,Math.round(t*o[0][0]+a*o[0][1]+r*o[0][2]))),v=Math.max(0,Math.min(255,Math.round(t*o[1][0]+a*o[1][1]+r*o[1][2]))),x=Math.max(0,Math.min(255,Math.round(t*o[2][0]+a*o[2][1]+r*o[2][2])));return fe(p,v,x)}var Le=Z("<button><!></button>");function de(e,i){let t=$(i,"children",8),a=$(i,"label",8),r=$(i,"color",8,"primary"),s=$(i,"handleClick",8);var o=Le();o.__click=function(...v){var x;(x=s())==null||x.apply(this,v)};var p=u(o);Oe(p,t),d(o),Y(()=>{D(o,1,`inline-block mt-6 px-3 py-2 sm:px-6 sm:py-3 
        w-full
        font-semibold 
        text-[var(--background)] hover:text-[var(--background)] 
        ${(r()==="primary"?"bg-[var(--primary)]":"bg-[var(--secondary)]")??""} 
        ${(r()==="primary"?"hover:bg-[var(--secondary)]":"hover:bg-[var(--primary)]")??""} 
        transition z-20`),L(o,"aria-label",a())}),w(e,o)}ke(["click"]);var Ye=Z('<div class="flex flex-row gap-4 justify-start items-center mb-5"><div> </div> <div class="p-3 border grow">Contraste avec daltonisme <b> </b></div></div>'),Ze=Z(`<!> <!> <div class="relative w-full max-w-5xl mx-auto px-4 mb-10"><article class="w-full px-10 pb-10 bg-[var(--background)] border"><h1>Tester le contraste des couleurs</h1> <div class="w-full flex flex-row gap-5 flex-wrap justify-start items-end"><div class="grow"><label for="hexaBg" class="font-black my-5">Couleur de fond :</label> <div class="input-container svelte-ws3tye"><input type="text" aria-label="code hexadecimal fond" title="Veuillez entrer un code hexadécimal valide (ex: #FF5733)" class="svelte-ws3tye"> <input type="color" id="hexaBg" class="svelte-ws3tye"></div> <!></div> <div class="grow"><label for="hexaText" class="font-black my-5">Couleur du texte :</label> <div class="input-container svelte-ws3tye"><input type="text" aria-label="code hexadecimal texte" title="Veuillez entrer un code hexadécimal valide (ex: #FF5733)" class="svelte-ws3tye"> <input type="color" id="hexaText" class="svelte-ws3tye"></div> <!></div></div> <hr class="my-10"> <div class="flex flex-row gap-4 justify-start items-center mb-5"><div> </div> <div class="p-2 border grow">Contraste sans handicap visuel</div></div> <!> <!></article></div> <svg height="0" width="0"><defs><filter id="protanopia"><feColorMatrix type="matrix" values="0.567, 0.433, 0, 0, 0
													0.558, 0.442, 0, 0, 0
													0, 0.242, 0.758, 0, 0
													0, 0, 0, 1, 0"></feColorMatrix></filter><filter id="deuteranopia"><feColorMatrix type="matrix" values="0.625, 0.375, 0, 0, 0
													0.7, 0.3, 0, 0, 0
													0, 0.3, 0.7, 0, 0
													0, 0, 0, 1, 0"></feColorMatrix></filter><filter id="tritanopia"><feColorMatrix type="matrix" values="0.95, 0.05, 0, 0, 0
													0, 0.433, 0.567, 0, 0
													0, 0.475, 0.525, 0, 0
													0, 0, 0, 1, 0"></feColorMatrix></filter><filter id="achromatopsia"><feColorMatrix type="matrix" values="0.299, 0.587, 0.114, 0, 0
													0.299, 0.587, 0.114, 0, 0
													0.299, 0.587, 0.114, 0, 0
													0, 0, 0, 1, 0"></feColorMatrix></filter></defs></svg>`,1);function rt(e,i){He(i,!1);const t=[{title:"protanopie",technical:"protanopia"},{title:"deutéranopie",technical:"deuteranopia"},{title:"tritanopie",technical:"tritanopia"},{title:"achromatopsie",technical:"achromatopsia"}];let a=N("#f8f8f8"),r=N("#111110"),s=N({contrast:0,protanopia:0,deuteranopia:0,tritanopia:0,achromatopsia:0});function o(){b(r,pe(n(a),n(r))),v()}function p(){b(a,De(n(a),n(r))),v()}function v(){ne(s,n(s).contrast=_(n(a),n(r))),["protanopia","deuteranopia","tritanopia","achromatopsia"].forEach(l=>{ne(s,n(s)[l]=_(ue(n(a),l),ue(n(r),l)))})}function x(l,f){const h=l.target.value.trim();/^#[0-9A-Fa-f]{6}$/.test(h)&&(f==="bg"?b(a,h):b(r,h),v())}function M(l){return[{label:"AAA",reached:l>=J}]}qe(v),Ce();var K=Ze(),Q=Ie(K);Ge(Q);var U=c(Q,2);oe(U,{class:"absolute top-[150px] end-[0] w-[90px] sm:w-[150px]"});var W=c(U,2),X=u(W),B=c(u(X),2),R=u(B),P=c(u(R),2),g=u(P);C(g),L(g,"pattern","#[0-9A-Fa-f]6");var E=c(g,2);C(E),d(P);var me=c(P,2);de(me,{handleClick:p,label:"Ajuster le fond",children:(l,f)=>{V();var m=re("Ajuster le fond");w(l,m)},$$slots:{default:!0}}),d(R);var ee=c(R,2),S=c(u(ee),2),y=u(S);C(y),L(y,"pattern","#[0-9A-Fa-f]6");var H=c(y,2);C(H),d(S);var he=c(S,2);de(he,{handleClick:o,label:"Ajuster le texte",children:(l,f)=>{V();var m=re("Ajuster le texte");w(l,m)},$$slots:{default:!0}}),d(ee),d(B);var I=c(B,4),A=u(I),be=u(A,!0);d(A);var xe=c(A,2);d(I);var te=c(I,2);Ve(te,1,()=>t,Ne,(l,f)=>{var m=Ye(),h=u(m),ge=u(h,!0);d(h);var z=c(h,2),ae=c(u(z)),ye=u(ae,!0);d(ae),d(z),d(m),Y((we,Me)=>{D(h,1,we,"svelte-ws3tye"),q(ge,Me),se(z,`background-color: ${n(a)??""}; color: ${n(r)??""}; filter: url(#${[n(f).technical]});`),q(ye,n(f).title)},[()=>ie(M(n(s)[n(f).technical])[0].reached?"badge success":"badge error"),()=>M(n(s)[n(f).technical])[0].reached?"Pass":"Fail"],le),w(l,m)});var _e=c(te,2);oe(_e,{class:"absolute bottom-0 start-0 md:start-[-15%] w-[90px] sm:w-[150px] z-[-1]"}),d(X),d(W),V(2),Y((l,f)=>{D(A,1,l,"svelte-ws3tye"),q(be,f),se(xe,`background-color: ${n(a)??""}; color: ${n(r)??""};`)},[()=>ie(M(n(s).contrast)[0].reached?"badge success":"badge error"),()=>M(n(s).contrast)[0].reached?"Pass":"Fail"],le),T(g,()=>n(a),l=>b(a,l)),k("input",g,l=>x(l,"bg")),T(E,()=>n(a),l=>b(a,l)),k("input",E,v),T(y,()=>n(r),l=>b(r,l)),k("input",y,l=>x(l,"text")),T(H,()=>n(r),l=>b(r,l)),k("input",H,v),w(e,K),ze()}export{rt as component};
